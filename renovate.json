{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "dependencyDashboard": true,
  "enableVulnerabilityAlerts": true,
  "dockerfile": {
    "enabled": true
  },
  "docker": {
    "enabled": true,
    "automerge": false
  },
  "postUpdateOptions": [
    "gomodTidy",
    "npmDedupe",
    "yarnDedupeHighest"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["^scripts/deps\\.sh$"],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[^\\s]+) depName=(?<depName>[^\\n]+)\\n[A-Z_]+_VERSION=(?<currentValue>[^\\s]+)"
      ],
      "depNameTemplate": "{{{depName}}}",
      "datasourceTemplate": "{{{datasource}}}"
    },
    {
      "customType": "regex",
      "fileMatch": ["\\.github/workflows/.+\\.ya?ml$"],
      "matchStrings": [
        "uses: (?<depName>[^@]+)@(?<currentValue>[^\\s]+)"
      ],
      "depNameTemplate": "github-action:{{{depName}}}",
      "datasourceTemplate": "github-tags"
    }
  ],
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "matchUpdateTypes": ["major"],
      "enabled": true,
      "groupName": "docker-major"
    },
    {
      "matchDatasources": ["docker"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true,
      "automergeStrategy": "squash",
      "minimumReleaseAge": "7 days",
      "groupName": "docker-minor-patch"
    },
    {
      "matchDatasources": ["github-tags"],
      "matchUpdateTypes": ["major"],
      "enabled": true,
      "groupName": "tool-major"
    },
    {
      "matchDatasources": ["github-tags"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true,
      "automergeStrategy": "squash",
      "minimumReleaseAge": "3 days",
      "groupName": "tool-minor-patch"
    },
    {
      "matchPackagePatterns": ["^golang$"],
      "enabled": true,
      "groupName": "golang"
    },
    {
      "matchPackagePatterns": ["^actions/"],
      "enabled": true,
      "groupName": "github-actions"
    }
  ]
}
